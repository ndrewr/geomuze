function Result(service,track,artist,album,cover,url,lyrics){this.url=url||"No Url",this.artist_name=artist||"No Name",this.track_name=track||"No Title",this.cover=cover||"No Cover",this.lyrics_url=lyrics||"#",this.service=service||"unaffiliated",this.album=album||"No Album Title"}function FaveTrack(result,location){this.result=result||{msg:"uh oh nuthin"},this.track_name=result.track_name,this.artist_name=result.artist_name,this.cover=result.cover||"No Cover Available",this.url=result.url||"#",this.lyrics_url=result.lyrics_url||"#",this.album=result.album||"No Album Title",this.location=location||{msg:"oh noes nowhere"}}Array.prototype.alreadyInArray=function(prop1,prop2){var found=!1;return this.forEach(function(item){item.track_name===prop1&&item.artist_name===prop2&&(found=!0)}),found};var initial_result=new Result("spotify","Dragonfire - Udacity Theme","Lost Legacy","Gates Of Wrath","https://i.scdn.co/image/ecd1070cbc572dd534becd67b49fba23bdf0b406","https://p.scdn.co/mp3-preview/8c4e0e9f50663d1a2ac537027708324c48e4d548","https://www.musixmatch.com/lyrics/Lost-Legacy/Dragonfire"),test_data='[{"result":{"url":"https://p.scdn.co/mp3-preview/a05426bda4dc83e0915d9c2ce0852fd207423e8c","artist_name":"Leonard Cohen","track_name":"Samson in New Orleans","cover":"https://i.scdn.co/image/57860e844caab1877380069ab3fded6dc54d0e25","lyrics_url":"https://www.musixmatch.com/lyrics/Leonard-Cohen/Samson-in-New-Orleans","service":"spotify","album":"Popular Problems"},"track_name":"Samson in New Orleans","artist_name":"Leonard Cohen","cover":"https://i.scdn.co/image/57860e844caab1877380069ab3fded6dc54d0e25","url":"https://p.scdn.co/mp3-preview/a05426bda4dc83e0915d9c2ce0852fd207423e8c","lyrics_url":"https://www.musixmatch.com/lyrics/Leonard-Cohen/Samson-in-New-Orleans","album":"Popular Problems","location":{"k":29.95106579999999,"D":-90.0715323}},{"result":{"url":"https://p.scdn.co/mp3-preview/5aabe5b1639f12b3f5266e158d3df3bc0e462e37","artist_name":"Lana Del Rey","track_name":"Brooklyn Baby","cover":"https://i.scdn.co/image/be93c424f7aaca6737c9433c44b5d1bf8829b011","lyrics_url":"https://www.musixmatch.com/lyrics/Lana-Del-Rey/Brooklyn-Baby","service":"spotify","album":"Ultraviolence (Deluxe)"},"track_name":"Brooklyn Baby","artist_name":"Lana Del Rey","cover":"https://i.scdn.co/image/be93c424f7aaca6737c9433c44b5d1bf8829b011","url":"https://p.scdn.co/mp3-preview/5aabe5b1639f12b3f5266e158d3df3bc0e462e37","lyrics_url":"https://www.musixmatch.com/lyrics/Lana-Del-Rey/Brooklyn-Baby","album":"Ultraviolence (Deluxe)","location":{"k":40.6781784,"D":-73.9441579}},{"result":{"url":"https://p.scdn.co/mp3-preview/b2332f1e9272472cffdf223e118f88040bc6926d","artist_name":"John Mayer","track_name":"Stop This Train - Live at the Nokia Theatre","cover":"https://i.scdn.co/image/8b8739e220eada910ffdf8b802771a9b3a130d8a","lyrics_url":"#","service":"spotify","album":"Where The Light Is: John Mayer Live In Los Angeles"},"track_name":"Stop This Train - Live at the Nokia Theatre","artist_name":"John Mayer","cover":"https://i.scdn.co/image/8b8739e220eada910ffdf8b802771a9b3a130d8a","url":"https://p.scdn.co/mp3-preview/b2332f1e9272472cffdf223e118f88040bc6926d","lyrics_url":"#","album":"Where The Light Is: John Mayer Live In Los Angeles","location":{"k":34.0522342,"D":-118.2436849}},{"result":{"url":"No Url","artist_name":"Lost Legacy","track_name":"Dragonfire","cover":"http://s.mxmcdn.net/images-storage/albums/9/0/6/6/3/5/11536609.jpg","lyrics_url":"https://www.musixmatch.com/lyrics/Lost-Legacy/Dragonfire","service":"musix","album":"Gates of Wrath"},"track_name":"Dragonfire","artist_name":"Lost Legacy","cover":"http://s.mxmcdn.net/images-storage/albums/9/0/6/6/3/5/11536609.jpg","url":"No Url","lyrics_url":"https://www.musixmatch.com/lyrics/Lost-Legacy/Dragonfire","album":"Gates of Wrath","location":{"k":37.399864,"D":-122.10840000000002}},{"result":{"url":"https://p.scdn.co/mp3-preview/f5c5ecb266020286165d9241f31b6cdad6da20ed","artist_name":"Louis Armstrong & His Savoy Ballroom Five","track_name":"St. James Infirmary","cover":"https://i.scdn.co/image/c1ff837dccdf259206de5f3e19063fab98bc9b69","lyrics_url":"https://www.musixmatch.com/lyrics/Louis-Armstrong/St-James-Infirmary","service":"spotify","album":"Columbia Original Masters"},"track_name":"St. James Infirmary","artist_name":"Louis Armstrong & His Savoy Ballroom Five","cover":"https://i.scdn.co/image/c1ff837dccdf259206de5f3e19063fab98bc9b69","url":"https://p.scdn.co/mp3-preview/f5c5ecb266020286165d9241f31b6cdad6da20ed","lyrics_url":"https://www.musixmatch.com/lyrics/Louis-Armstrong/St-James-Infirmary","album":"Columbia Original Masters","location":{"k":38.6270025,"D":-90.1994042}},{"result":{"url":"https://p.scdn.co/mp3-preview/ba68ca1b1dd0a697ae3698eb6b29b2692979dcaa","artist_name":"DJ Bobo","track_name":"Chihuahua - Radio Version","cover":"https://i.scdn.co/image/17846dc8a745e7896ed82e5e137008d59de695d2","lyrics_url":"https://www.musixmatch.com/lyrics/DJ-Bobo/Chihuahua-radio-version","service":"spotify","album":"Chihuahua"},"track_name":"Chihuahua - Radio Version","artist_name":"DJ Bobo","cover":"https://i.scdn.co/image/17846dc8a745e7896ed82e5e137008d59de695d2","url":"https://p.scdn.co/mp3-preview/ba68ca1b1dd0a697ae3698eb6b29b2692979dcaa","lyrics_url":"https://www.musixmatch.com/lyrics/DJ-Bobo/Chihuahua-radio-version","album":"Chihuahua","location":{"k":28.6329957,"D":-106.06910040000002}},{"result":{"url":"https://p.scdn.co/mp3-preview/1e74a2b25ff4187b982c8b628589c3fe4262355f","artist_name":"The Smith Street Band","track_name":"Calgary Girls","cover":"https://i.scdn.co/image/a81784fb99f3654e8fc675bbebdc82fbda51fe30","lyrics_url":"https://www.musixmatch.com/lyrics/The-Smith-Street-Band/Calgary-Girls","service":"spotify","album":"Throw Me in the River"},"track_name":"Calgary Girls","artist_name":"The Smith Street Band","cover":"https://i.scdn.co/image/a81784fb99f3654e8fc675bbebdc82fbda51fe30","url":"https://p.scdn.co/mp3-preview/1e74a2b25ff4187b982c8b628589c3fe4262355f","lyrics_url":"https://www.musixmatch.com/lyrics/The-Smith-Street-Band/Calgary-Girls","album":"Throw Me in the River","location":{"k":51.0486151,"D":-114.0708459}}]';!function(){function loadScript(){var script=document.createElement("script");script.type="text/javascript",script.src="https://maps.googleapis.com/maps/api/js?libraries=places&signed_in=true&callback=initialize",document.body.appendChild(script)}function initStorage(app){app.storage={set:function(key,value){key&&value&&("object"==typeof value&&(value=JSON.stringify(value)),localStorage.setItem(key,value))},get:function(key){var value=localStorage.getItem(key);if(value)return value=JSON.parse(value)}},localStorage.setItem("saved_list",test_data)}function initPlayer(app){app.player={},app.player.audio=$(".aud")[0],app.player.isPlaying=!1;var aud=app.player.audio;$("body").on("click",".audio-control",function(evt){evt.preventDefault(),app.player.audio.isPlaying?(aud.pause(),app.player.audio.isPlaying=!1,$(".play").removeClass("icon-pause2").addClass("icon-play3")):(aud.play(),app.player.audio.isPlaying=!0,$(".play").removeClass("icon-play3").addClass("icon-pause2")),aud.addEventListener("ended",function(){app.player.audio.isPlaying=!1,$(".play").removeClass("icon-pause2").addClass("icon-play3")}),aud.addEventListener("timeupdate",function(){var width=parseInt($("#jukebox").css("width"))-10,percentPlayed=Math.round(aud.currentTime/aud.duration*100),barWidth=Math.floor(percentPlayed*(width/100));$("#jukebox .play-progress").css("width",barWidth)})})}function initHandlers(app){var _listtoggle=$("#list-toggle"),_icon=$("#list-toggle span"),_listcontainer=$("#list-container");_listtoggle.click(function(){var leftOffset="0px"===_listcontainer.css("left")?"-290px":"0px";_listcontainer.animate({left:leftOffset},1e3),_icon.hasClass("icon-map")?_icon.removeClass("icon-map").addClass("icon-file-text"):_icon.removeClass("icon-file-text").addClass("icon-map")}),$(".navbar-collapse a").click(function(){$(".navbar-collapse").collapse("hide")}),app.hideList=function(){var isMobileMode="none"===_listtoggle.css("display")?!1:!0;isMobileMode&&_listtoggle.click()},app.showList=function(){var isMobileMode="none"===_listtoggle.css("display")?!1:!0,isHidden="0px"===_listcontainer.css("left")?!1:!0;isMobileMode&&isHidden&&_listtoggle.click()}}function MapView(map_style,app){function clearMarker(){current_marker&&(current_marker.setMap(null),current_marker=null),markers.length>0&&markers.forEach(function(marker){marker.setMap(null),marker=null})}function drop(marker,delay){setTimeout(function(){marker.setMap(self.map)},200*delay)}var current_marker,self=app,markers=[];self.current_location=new google.maps.LatLng(-33.8665433,151.1956316);var mapOptions={center:{lat:-34.397,lng:150.644},zoom:10,styles:map_style};self.map=new google.maps.Map(document.getElementById("map-canvas"),mapOptions),self.service=new google.maps.places.PlacesService(self.map),self.infopane=new google.maps.InfoWindow({content:"Well, Hullo! I'll have more to say after a lil' searchy-search!",maxWidth:320}),self.configInfopane=function(track){var audio_template='<div id="jukebox"><div class="player-info">Sample Clip</div><a class="audio-control play icon-play3" href="#"><span>Play</span></a><div class="loader"><div class="play-progress"></div></div><audio class="aud" src=""><p>Oops, looks like your browser does not support HTML 5 audio.</p></audio></div>',info_template="<h3>"+track.track_name+"</h3><p>"+track.artist_name+"</p><p><em>"+track.album+'</em></p><div class="infobox-player"><img src="'+track.cover+'"/>'+audio_template+"</div>";self.infopane.setContent(info_template);var track_loc=track.location;self.infopane.setPosition(track_loc?track_loc:self.current_location),self.configPlayer(track.url,track.track_name)},self.createMarker=function(location){var marker=new google.maps.Marker({map:self.map,position:location,animation:google.maps.Animation.DROP,draggable:!0,icon:"images/geomuze-icon-small.png"});current_marker=marker,google.maps.event.addListener(marker,"click",function(){self.infopane.open(self.map,marker)}),google.maps.event.addListener(marker,"mousedown",function(){self.infopane.open(self.map,marker)})},self.doPlaceSearch=function(place_string){self.service.textSearch({query:place_string,type:"cities"},self.gotoLocation)},self.gotoLocation=function(location_data,status){google.maps.places.PlacesServiceStatus;if(status===google.maps.places.PlacesServiceStatus.OK){var place,new_coord;clearMarker(),Array.isArray(location_data)?(place=location_data[0],new_coord=place.geometry.location):new_coord=location_data,self.current_location=new_coord,self.map.setCenter(new_coord),self.map.setZoom(10),self.createMarker(new_coord)}},self.showAllMarkers=function(items){clearMarker(),markers=[];for(var boundary=new google.maps.LatLngBounds,i=0;i<items.length;i++){var marker=new google.maps.Marker({position:items[i].location,title:items[i].track_name,animation:google.maps.Animation.DROP,icon:"images/geomuze-icon-small.png"});markers.push(marker),boundary.extend(marker.position),self.map.fitBounds(boundary),drop(marker,i)}};var request={location:new google.maps.LatLng(37.399864,-122.10840000000002),radius:"500",query:"restaurant"};self.service.textSearch(request,self.gotoLocation)}window.app={},window.initialize=function(){var custom_style=[{stylers:[{color:"#439a5c"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#268993"}]},{elementType:"labels.text.fill",stylers:[{color:"#781543"}]},{elementType:"labels.text.stroke",stylers:[{weight:.3},{color:"#121319"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#3e7248"}]},{featureType:"road.highway",stylers:[{color:"#e2c419"}]},{featureType:"transit.station.airport",stylers:[{color:"#cfd2d5"}]}];MapView(custom_style,app),initStorage(app);var checker=0;!function checkJquery(){window.jQuery?(clearInterval(checker),initHandlers(app),initPlayer(app),app.configInfopane(initial_result)):checker=window.setInterval(checkJquery,100)}()},app.configPlayer=function(url){app.player.audio.pause(),"No Url"===url||"No%20Url"===url?($(".play").removeClass("icon-play3").addClass("disable"),$(".player-info").html("No Sample")):(app.player.audio.setAttribute("src",url),app.player.audio.load(),$(".player-info").html("Sample Clip")),app.player.audio.isPlaying&&(app.player.audio.isPlaying=!1)},window.onload=loadScript}();